<?xml version="1.0" encoding="utf-8" standalone="yes"?><rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>Posts on QYGame</title><link>https://qygame.github.io/blog/posts/</link><description>Recent content in Posts on QYGame</description><generator>Hugo</generator><language>en</language><atom:link href="https://qygame.github.io/blog/posts/index.xml" rel="self" type="application/rss+xml"/><item><title/><link>https://qygame.github.io/blog/posts/client/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://qygame.github.io/blog/posts/client/</guid><description>&lt;h2 id="client"&gt;client&lt;a class="anchor" href="#client"&gt;#&lt;/a&gt;&lt;/h2&gt;
&lt;h3 id="脚本目录架构"&gt;脚本目录架构&lt;a class="anchor" href="#%e8%84%9a%e6%9c%ac%e7%9b%ae%e5%bd%95%e6%9e%b6%e6%9e%84"&gt;#&lt;/a&gt;&lt;/h3&gt;
&lt;p&gt;Scripts &lt;br/&gt;
&amp;ndash; /Define 公共定义 &lt;br/&gt;
&amp;ndash; &amp;ndash; GameRunTimeData.cs 保存了运行时候需要的数据, 比如UserInfo就是其的成员变量 &lt;br/&gt;
&amp;ndash; &amp;ndash; GlobalConst.cs 保存了游戏中的常量 &lt;br/&gt;
&amp;ndash; /Model 模块 &lt;br/&gt;
&amp;ndash; /Net 网络 &lt;br/&gt;
&amp;ndash; &amp;ndash; /NetLogic 网络具体事务处理 &lt;br/&gt;
&amp;ndash; &amp;ndash; /NetSocket 网络底层服务 &lt;br/&gt;
&amp;ndash; /UI &lt;br/&gt;
&amp;ndash; &amp;ndash; /Surfaces &lt;br/&gt;
&amp;ndash; &amp;ndash; /Login &lt;br/&gt;
&amp;ndash; &amp;ndash; &amp;ndash; LoginTransfer.cs ui界面的总控制类， 其底下一般是各种btn的点击函数 &lt;br/&gt;
&amp;ndash; &amp;ndash; &amp;ndash; BtnClick_Logon_Account.cs 账号登录按钮的 响应函数 &lt;br/&gt;
&amp;ndash; /Utility 实用脚本， 可以理解为与系统相关的脚本 &lt;br/&gt;
&amp;ndash; GameApp.cs Compontes目录下所有类的 管理类 &lt;br/&gt;&lt;/p&gt;</description></item><item><title/><link>https://qygame.github.io/blog/posts/readme/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://qygame.github.io/blog/posts/readme/</guid><description>&lt;h2 id="目录说明"&gt;目录说明&lt;a class="anchor" href="#%e7%9b%ae%e5%bd%95%e8%af%b4%e6%98%8e"&gt;#&lt;/a&gt;&lt;/h2&gt;
&lt;table&gt;
 &lt;thead&gt;
 &lt;tr&gt;
 &lt;th&gt;path&lt;/th&gt;
 &lt;th&gt;desc&lt;/th&gt;
 &lt;/tr&gt;
 &lt;/thead&gt;
 &lt;tbody&gt;
 &lt;tr&gt;
 &lt;td&gt;org&lt;/td&gt;
 &lt;td&gt;blog org源码&lt;/td&gt;
 &lt;/tr&gt;
 &lt;tr&gt;
 &lt;td&gt;static&lt;/td&gt;
 &lt;td&gt;hugo静态文件&lt;/td&gt;
 &lt;/tr&gt;
 &lt;tr&gt;
 &lt;td&gt;config.toml&lt;/td&gt;
 &lt;td&gt;hugo配置文件&lt;/td&gt;
 &lt;/tr&gt;
 &lt;/tbody&gt;
&lt;/table&gt;
&lt;h2 id="流程"&gt;流程&lt;a class="anchor" href="#%e6%b5%81%e7%a8%8b"&gt;#&lt;/a&gt;&lt;/h2&gt;
&lt;p&gt;push触发github action &lt;br/&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;下载 clay9/emacs.git &lt;br/&gt;&lt;/li&gt;
&lt;li&gt;执行init-for-script.el, export org to md &lt;br/&gt;&lt;/li&gt;
&lt;li&gt;执行hugo的编译, export md to html &lt;br/&gt;&lt;/li&gt;
&lt;li&gt;执行hugo的发布 &lt;br/&gt;&lt;/li&gt;
&lt;/ul&gt;</description></item><item><title/><link>https://qygame.github.io/blog/posts/repository/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://qygame.github.io/blog/posts/repository/</guid><description>&lt;h2 id="构建流程"&gt;构建流程&lt;a class="anchor" href="#%e6%9e%84%e5%bb%ba%e6%b5%81%e7%a8%8b"&gt;#&lt;/a&gt;&lt;/h2&gt;
&lt;p&gt;qydocker与qygame协同工作, 构建docker images. &lt;br/&gt;
具体流程如下图: &lt;br/&gt;&lt;/p&gt;
&lt;p&gt;&lt;figure&gt;&lt;img src="https://qygame.github.io/blog/ox-hugo/1.png"&gt;
&lt;/figure&gt;
 &lt;br/&gt;&lt;/p&gt;
&lt;h2 id="qydocker"&gt;qydocker&lt;a class="anchor" href="#qydocker"&gt;#&lt;/a&gt;&lt;/h2&gt;
&lt;p&gt;管理docker image. 负责image构建与运行. &lt;br/&gt;&lt;/p&gt;
&lt;p&gt;托管在&lt;a href="https://github.com/qydocker"&gt;qydocker organization&lt;/a&gt; &lt;br/&gt;&lt;/p&gt;
&lt;table&gt;
 &lt;thead&gt;
 &lt;tr&gt;
 &lt;th&gt;仓库名&lt;/th&gt;
 &lt;th&gt;作用&lt;/th&gt;
 &lt;/tr&gt;
 &lt;/thead&gt;
 &lt;tbody&gt;
 &lt;tr&gt;
 &lt;td&gt;&lt;a href="https://github.com/qydocker/build_image_dev"&gt;qydocker/build_image_dev&lt;/a&gt;&lt;/td&gt;
 &lt;td&gt;构建qygame base image&lt;/td&gt;
 &lt;/tr&gt;
 &lt;tr&gt;
 &lt;td&gt;&lt;a href="https://github.com/qydocker/build_publish"&gt;qydocker/build_publish&lt;/a&gt;&lt;/td&gt;
 &lt;td&gt;编译qygame, 结果托管在&lt;a href="https://github.com/qygame/svr-publish"&gt;qygame/svr-publish&lt;/a&gt;&lt;/td&gt;
 &lt;/tr&gt;
 &lt;tr&gt;
 &lt;td&gt;qydocker/build_image&lt;/td&gt;
 &lt;td&gt;构建qygame images&lt;/td&gt;
 &lt;/tr&gt;
 &lt;tr&gt;
 &lt;td&gt;&lt;a href="https://github.com/qydocker/docker-compose"&gt;qydocker/docker-compose&lt;/a&gt;&lt;/td&gt;
 &lt;td&gt;使用docker-compose管理qygame images&lt;/td&gt;
 &lt;/tr&gt;
 &lt;tr&gt;
 &lt;td&gt;&lt;a href="https://github.com/qydocker/k8s"&gt;qydocker/k8s&lt;/a&gt;&lt;/td&gt;
 &lt;td&gt;使用k8s管理qygame images&lt;/td&gt;
 &lt;/tr&gt;
 &lt;tr&gt;
 &lt;td&gt;&lt;a href="https://github.com/qydocker/mirror_google_image"&gt;qydocker/mirror_google_image&lt;/a&gt;&lt;/td&gt;
 &lt;td&gt;google docker镜像映射到dockerhub, 加快访问速度&lt;/td&gt;
 &lt;/tr&gt;
 &lt;/tbody&gt;
&lt;/table&gt;
&lt;h2 id="qygame"&gt;qygame&lt;a class="anchor" href="#qygame"&gt;#&lt;/a&gt;&lt;/h2&gt;
&lt;p&gt;管理游戏源码, 主要有server端代码, client代码, protocol协议, database. &lt;br/&gt;&lt;/p&gt;
&lt;p&gt;托管在&lt;a href="https://github.com/qygame"&gt;qygame organization&lt;/a&gt; &lt;br/&gt;&lt;/p&gt;
&lt;table&gt;
 &lt;thead&gt;
 &lt;tr&gt;
 &lt;th&gt;仓库名&lt;/th&gt;
 &lt;th&gt;作用&lt;/th&gt;
 &lt;th&gt;备注&lt;/th&gt;
 &lt;/tr&gt;
 &lt;/thead&gt;
 &lt;tbody&gt;
 &lt;tr&gt;
 &lt;td&gt;&lt;a href="https://github.com/qygame/svr-kernel"&gt;qygame/svr-kernel&lt;/a&gt;&lt;/td&gt;
 &lt;td&gt;业务与基础库的适配层&lt;/td&gt;
 &lt;td&gt;&lt;/td&gt;
 &lt;/tr&gt;
 &lt;tr&gt;
 &lt;td&gt;&lt;a href="https://github.com/qygame/svr-frame"&gt;qygame/svr-frame&lt;/a&gt;&lt;/td&gt;
 &lt;td&gt;业务层&lt;/td&gt;
 &lt;td&gt;依赖svr-kernel&lt;/td&gt;
 &lt;/tr&gt;
 &lt;tr&gt;
 &lt;td&gt;qygame/svr-subgames&lt;/td&gt;
 &lt;td&gt;子游戏&lt;/td&gt;
 &lt;td&gt;依赖svr-frame&lt;/td&gt;
 &lt;/tr&gt;
 &lt;tr&gt;
 &lt;td&gt;&lt;a href="https://github.com/qygame/protocol"&gt;qygame/protocol&lt;/a&gt;&lt;/td&gt;
 &lt;td&gt;client与server消息协议&lt;/td&gt;
 &lt;td&gt;&lt;/td&gt;
 &lt;/tr&gt;
 &lt;tr&gt;
 &lt;td&gt;&lt;a href="https://github.com/qygame/client"&gt;qygame/client&lt;/a&gt;&lt;/td&gt;
 &lt;td&gt;client&lt;/td&gt;
 &lt;td&gt;&lt;/td&gt;
 &lt;/tr&gt;
 &lt;tr&gt;
 &lt;td&gt;&lt;a href="https://github.com/qygame/database"&gt;qygame/database&lt;/a&gt;&lt;/td&gt;
 &lt;td&gt;数据库&lt;/td&gt;
 &lt;td&gt;&lt;/td&gt;
 &lt;/tr&gt;
 &lt;tr&gt;
 &lt;td&gt;&lt;a href="https://github.com/qygame/svr-publish"&gt;qygame/svr-publish&lt;/a&gt;&lt;/td&gt;
 &lt;td&gt;以branch形式存放svr编译结果&lt;/td&gt;
 &lt;td&gt;&lt;/td&gt;
 &lt;/tr&gt;
 &lt;/tbody&gt;
&lt;/table&gt;</description></item><item><title/><link>https://qygame.github.io/blog/posts/server_view/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://qygame.github.io/blog/posts/server_view/</guid><description>&lt;h2 id="服务器架构"&gt;服务器架构&lt;a class="anchor" href="#%e6%9c%8d%e5%8a%a1%e5%99%a8%e6%9e%b6%e6%9e%84"&gt;#&lt;/a&gt;&lt;/h2&gt;
&lt;h3 id="logic-view"&gt;logic view&lt;a class="anchor" href="#logic-view"&gt;#&lt;/a&gt;&lt;/h3&gt;
&lt;pre tabindex="0"&gt;&lt;code class="language-plantuml" data-lang="plantuml"&gt;@startuml
client -&amp;gt; gate : test
@enduml&lt;/code&gt;&lt;/pre&gt;&lt;h3 id="implementation-view"&gt;implementation view&lt;a class="anchor" href="#implementation-view"&gt;#&lt;/a&gt;&lt;/h3&gt;
&lt;h3 id="process-view"&gt;process view&lt;a class="anchor" href="#process-view"&gt;#&lt;/a&gt;&lt;/h3&gt;
&lt;h3 id="deployment-view"&gt;deployment view&lt;a class="anchor" href="#deployment-view"&gt;#&lt;/a&gt;&lt;/h3&gt;
&lt;p&gt;&lt;figure&gt;&lt;img src="https://qygame.github.io/blog/ox-hugo/server_deployment.png"&gt;
&lt;/figure&gt;
 &lt;br/&gt;&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-text" data-lang="text"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;TODO 后期补充k8s部署下的 deployment view&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h3 id="use-case-view"&gt;use case view&lt;a class="anchor" href="#use-case-view"&gt;#&lt;/a&gt;&lt;/h3&gt;
&lt;h2 id="服务器说明"&gt;服务器说明&lt;a class="anchor" href="#%e6%9c%8d%e5%8a%a1%e5%99%a8%e8%af%b4%e6%98%8e"&gt;#&lt;/a&gt;&lt;/h2&gt;
&lt;table&gt;
 &lt;thead&gt;
 &lt;tr&gt;
 &lt;th&gt;服务器&lt;/th&gt;
 &lt;th&gt;说明&lt;/th&gt;
 &lt;th&gt;有状态&lt;/th&gt;
 &lt;th&gt;状态量&lt;/th&gt;
 &lt;th&gt;业务多线程&lt;/th&gt;
 &lt;th&gt;业务多线程原因&lt;/th&gt;
 &lt;th&gt;备注&lt;/th&gt;
 &lt;/tr&gt;
 &lt;/thead&gt;
 &lt;tbody&gt;
 &lt;tr&gt;
 &lt;td&gt;center&lt;/td&gt;
 &lt;td&gt;路由&lt;/td&gt;
 &lt;td&gt;n&lt;/td&gt;
 &lt;td&gt;&lt;/td&gt;
 &lt;td&gt;n&lt;/td&gt;
 &lt;td&gt;&lt;/td&gt;
 &lt;td&gt;&lt;/td&gt;
 &lt;/tr&gt;
 &lt;tr&gt;
 &lt;td&gt;db&lt;/td&gt;
 &lt;td&gt;数据库代理&lt;/td&gt;
 &lt;td&gt;n&lt;/td&gt;
 &lt;td&gt;&lt;/td&gt;
 &lt;td&gt;y&lt;/td&gt;
 &lt;td&gt;database操作耗时&lt;/td&gt;
 &lt;td&gt;&lt;/td&gt;
 &lt;/tr&gt;
 &lt;tr&gt;
 &lt;td&gt;gate&lt;/td&gt;
 &lt;td&gt;网关&lt;/td&gt;
 &lt;td&gt;y&lt;/td&gt;
 &lt;td&gt;map[gid, uid]&lt;/td&gt;
 &lt;td&gt;n&lt;/td&gt;
 &lt;td&gt;无业务逻辑&lt;/td&gt;
 &lt;td&gt;&lt;/td&gt;
 &lt;/tr&gt;
 &lt;tr&gt;
 &lt;td&gt;logon&lt;/td&gt;
 &lt;td&gt;登录&lt;/td&gt;
 &lt;td&gt;n&lt;/td&gt;
 &lt;td&gt;&lt;/td&gt;
 &lt;td&gt;n&lt;/td&gt;
 &lt;td&gt;&lt;/td&gt;
 &lt;td&gt;&lt;/td&gt;
 &lt;/tr&gt;
 &lt;tr&gt;
 &lt;td&gt;lobby&lt;/td&gt;
 &lt;td&gt;大厅&lt;/td&gt;
 &lt;td&gt;n&lt;/td&gt;
 &lt;td&gt;&lt;/td&gt;
 &lt;td&gt;n&lt;/td&gt;
 &lt;td&gt;&lt;/td&gt;
 &lt;td&gt;&lt;/td&gt;
 &lt;/tr&gt;
 &lt;tr&gt;
 &lt;td&gt;game&lt;/td&gt;
 &lt;td&gt;查询, 创建, 加入 房间&lt;/td&gt;
 &lt;td&gt;n&lt;/td&gt;
 &lt;td&gt;&lt;/td&gt;
 &lt;td&gt;n&lt;/td&gt;
 &lt;td&gt;&lt;/td&gt;
 &lt;td&gt;加载了房卡场与金币场的配置文件&lt;/td&gt;
 &lt;/tr&gt;
 &lt;tr&gt;
 &lt;td&gt;match&lt;/td&gt;
 &lt;td&gt;比赛场服务器&lt;/td&gt;
 &lt;td&gt;y&lt;/td&gt;
 &lt;td&gt;match自身数据stage_index等&lt;/td&gt;
 &lt;td&gt;n&lt;/td&gt;
 &lt;td&gt;&lt;/td&gt;
 &lt;td&gt;&lt;/td&gt;
 &lt;/tr&gt;
 &lt;tr&gt;
 &lt;td&gt;&lt;/td&gt;
 &lt;td&gt;&lt;/td&gt;
 &lt;td&gt;&lt;/td&gt;
 &lt;td&gt;match_manager有map&amp;lt;int,match&amp;gt;&lt;/td&gt;
 &lt;td&gt;&lt;/td&gt;
 &lt;td&gt;&lt;/td&gt;
 &lt;td&gt;&lt;/td&gt;
 &lt;/tr&gt;
 &lt;tr&gt;
 &lt;td&gt;room&lt;/td&gt;
 &lt;td&gt;游戏房间的具体处理&lt;/td&gt;
 &lt;td&gt;y&lt;/td&gt;
 &lt;td&gt;房间数据&lt;/td&gt;
 &lt;td&gt;n&lt;/td&gt;
 &lt;td&gt;&lt;/td&gt;
 &lt;td&gt;&lt;/td&gt;
 &lt;/tr&gt;
 &lt;tr&gt;
 &lt;td&gt;rank&lt;/td&gt;
 &lt;td&gt;排行榜&lt;/td&gt;
 &lt;td&gt;y&lt;/td&gt;
 &lt;td&gt;rank_manager有map&amp;lt;int,rank&amp;gt;&lt;/td&gt;
 &lt;td&gt;n&lt;/td&gt;
 &lt;td&gt;&lt;/td&gt;
 &lt;td&gt;&lt;/td&gt;
 &lt;/tr&gt;
 &lt;tr&gt;
 &lt;td&gt;redis&lt;/td&gt;
 &lt;td&gt;维护redis数据&lt;/td&gt;
 &lt;td&gt;n&lt;/td&gt;
 &lt;td&gt;&lt;/td&gt;
 &lt;td&gt;n&lt;/td&gt;
 &lt;td&gt;&lt;/td&gt;
 &lt;td&gt;&lt;/td&gt;
 &lt;/tr&gt;
 &lt;tr&gt;
 &lt;td&gt;task&lt;/td&gt;
 &lt;td&gt;任务&lt;/td&gt;
 &lt;td&gt;y&lt;/td&gt;
 &lt;td&gt;task_manager有map&amp;lt;int,task&amp;gt;&lt;/td&gt;
 &lt;td&gt;n&lt;/td&gt;
 &lt;td&gt;&lt;/td&gt;
 &lt;td&gt;&lt;/td&gt;
 &lt;/tr&gt;
 &lt;tr&gt;
 &lt;td&gt;chat&lt;/td&gt;
 &lt;td&gt;聊天服务器&lt;/td&gt;
 &lt;td&gt;n&lt;/td&gt;
 &lt;td&gt;&lt;/td&gt;
 &lt;td&gt;n&lt;/td&gt;
 &lt;td&gt;&lt;/td&gt;
 &lt;td&gt;ready to write&lt;/td&gt;
 &lt;/tr&gt;
 &lt;tr&gt;
 &lt;td&gt;club&lt;/td&gt;
 &lt;td&gt;俱乐部服务器&lt;/td&gt;
 &lt;td&gt;n&lt;/td&gt;
 &lt;td&gt;&lt;/td&gt;
 &lt;td&gt;n&lt;/td&gt;
 &lt;td&gt;&lt;/td&gt;
 &lt;td&gt;ready to write&lt;/td&gt;
 &lt;/tr&gt;
 &lt;tr&gt;
 &lt;td&gt;client&lt;/td&gt;
 &lt;td&gt;模拟client测试&lt;/td&gt;
 &lt;td&gt;y&lt;/td&gt;
 &lt;td&gt;ugmanager有map&amp;lt;gid,uid&amp;gt;&lt;/td&gt;
 &lt;td&gt;n&lt;/td&gt;
 &lt;td&gt;&lt;/td&gt;
 &lt;td&gt;&lt;/td&gt;
 &lt;/tr&gt;
 &lt;/tbody&gt;
&lt;/table&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-text" data-lang="text"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;什么时候使用业务多线程
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;当业务逻辑的处理时间耗时较久的时候, 使用业务多线程&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;div class="highlight"&gt;&lt;pre tabindex="0" style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-text" data-lang="text"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;业务多线程优点 是加快了速度
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;业务多线程缺点 编码复杂(增加了出错概率)&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;</description></item></channel></rss>