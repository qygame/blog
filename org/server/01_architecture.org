#+title: 服务器架构
#+date: 2025-10-10 15:22:43
#+hugo_section: docs
#+hugo_bundle: server/architecture
#+export_file_name: index
#+hugo_weight: 1
#+hugo_draft: false
#+hugo_auto_set_lastmod: t
#+hugo_custom_front_matter: :bookCollapseSection false
#+hugo_paired_shortcodes: qr %columns %details %hint mermaid %steps tabs tab

* 服务器架构
  #+begin_src mermaid :file result.png
       architecture-beta
       %% client
       service client(internet)[Client]

       %% Server
       group servers(server)[Servers]
       service gate(server)[Gate] in servers
       service room(server)[Room] in servers
       gate:R <-- L:room

       %% 数据层
       group dbs(database)[Databses]
       service redis(database)[Redis] in dbs
       service postgres(database)[Postgres] in dbs
       redis:R -- L:postgres

       %% 指向
       client:R --> L:gate

       gate:B --> T:redis{group}
  #+end_src

  #+RESULTS:
  [[file:result.png]]


* 服务器说明
  | 服务器      | 模块   | 说明                | 有状态 | 备注 |
  |-------------+--------+---------------------+--------+------|
  | gate        | login  | 登陆                | n      |      |
  |             | lobby  | 大厅                | n      |      |
  |             | game   | 查询/创建/加入 房间 | n      |      |
  |             | match  | 比赛场              | y      |      |
  |             | rank   | 排行榜              | y      |      |
  |             | task   | 任务                | y      |      |
  |             | center | 数据转发            | n      |      |
  |-------------+--------+---------------------+--------+------|
  | room        |        | 游戏房间            | y      |      |
  |-------------+--------+---------------------+--------+------|
  | redis       |        |                     |        |      |
  |-------------+--------+---------------------+--------+------|
  | postgresSQL |        |                     |        |      |
  |-------------+--------+---------------------+--------+------|

* 业务模块
  基础模块：
  1. login
  2. room / config -- Server自身读取
  3. game -- 类似于服务注册
  4. table 流程处理了


  上面是最基本的模块，下面的都是扩展. 也是相对比较独立的模块.
  1. rank
  2. task
  3. match
  4. club
  5. activity
