#+title: db
#+date: 2025-10-02 18:05:32
#+hugo_section: docs
#+hugo_bundle: server/db
#+export_file_name: index
#+hugo_weight: 13
#+hugo_draft: false
#+hugo_auto_set_lastmod: t
#+hugo_custom_front_matter: :bookCollapseSection false
#+hugo_paired_shortcodes: qr %columns %details %hint mermaid %steps tabs tab

db server

#+hugo: more


* server--db
  通过MySQL Connector/C++ 连接mysql

** 对外接口
   - void init()
     创建work线程数量的db
   - shared_ptr<db> get_db()
     通过shared_ptr自带的计数use_count来确认db是否可用
     mysql官方资料显示, mysqlx::Session非多线程安全.

** 参考资料
   [[https://dev.mysql.com/doc/x-devapi-userguide/en/collections-as-relational-tables.html][官方用例]]
   [[https://dev.mysql.com/doc/dev/connector-cpp/latest/group__devapi.html][API接口]]
